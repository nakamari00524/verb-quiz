<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Verb Conjugation Quiz</title>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
    <div id="artifact_react"></div>
    <script type="text/babel">
        function App() {
          const [gameState, setGameState] = React.useState('name'); // name, start, playing, result
          const [playerName, setPlayerName] = React.useState('');
          const [currentVerbIndex, setCurrentVerbIndex] = React.useState(0);
          const [currentStep, setCurrentStep] = React.useState(1);
          const [userInput, setUserInput] = React.useState('');
          const [feedback, setFeedback] = React.useState('');
          const [score, setScore] = React.useState(0);
          const [totalQuestions, setTotalQuestions] = React.useState(0);
          const [orderMode, setOrderMode] = React.useState('random');
          const [startTime, setStartTime] = React.useState(null);
          const [endTime, setEndTime] = React.useState(null);
          const [elapsedTime, setElapsedTime] = React.useState(0);

          const verbs = [
            { masu: 'shimasu', te: 'shite', ta: 'shita', nai: 'shinai' },
            { masu: 'kimasu', te: 'kite', ta: 'kita', nai: 'konai' },
            { masu: 'mimasu', te: 'mite', ta: 'mita', nai: 'minai' },
            { masu: 'okimasu', te: 'okite', ta: 'okita', nai: 'okinai' },
            { masu: 'tabemasu', te: 'tabete', ta: 'tabeta', nai: 'tabenai' },
            { masu: 'oshiemasu', te: 'oshiete', ta: 'oshieta', nai: 'oshienai' },
            { masu: 'kaimasu', te: 'katte', ta: 'katta', nai: 'kawanai' },
            { masu: 'tachimasu', te: 'tatte', ta: 'tatta', nai: 'tatanai' },
            { masu: 'suwarimasu', te: 'suwatte', ta: 'suwatta', nai: 'suwaranai' },
            { masu: 'yomimasu', te: 'yonde', ta: 'yonda', nai: 'yomanai' },
            { masu: 'asobimasu', te: 'asonde', ta: 'asonda', nai: 'asobanai' },
            { masu: 'kikimasu', te: 'kiite', ta: 'kiita', nai: 'kikanai' },
            { masu: 'oyogimasu', te: 'oyoide', ta: 'oyoida', nai: 'oyoganai' },
            { masu: 'hanashimasu', te: 'hanashite', ta: 'hanashita', nai: 'hanasanai' },
            { masu: 'ikimasu', te: 'itte', ta: 'itta', nai: 'ikanai' }
          ];

          const [shuffledVerbs, setShuffledVerbs] = React.useState([]);

          // Timer effect
          React.useEffect(() => {
            let interval;
            if (gameState === 'playing' && startTime) {
              interval = setInterval(() => {
                setElapsedTime(Math.floor((Date.now() - startTime) / 1000));
              }, 1000);
            }
            return () => clearInterval(interval);
          }, [gameState, startTime]);

          const handleNameSubmit = () => {
            if (playerName.trim()) {
              setGameState('start');
            }
          };

          const startGame = () => {
            let orderedVerbs;
            if (orderMode === 'random') {
              orderedVerbs = [...verbs].sort(() => Math.random() - 0.5);
            } else {
              orderedVerbs = [...verbs];
            }
            setShuffledVerbs(orderedVerbs);
            setGameState('playing');
            setCurrentVerbIndex(0);
            setCurrentStep(1);
            setUserInput('');
            setFeedback('');
            setScore(0);
            setTotalQuestions(0);
            setStartTime(Date.now());
            setElapsedTime(0);
            setEndTime(null);
          };

          const getCurrentVerb = () => {
            return shuffledVerbs[currentVerbIndex];
          };

          const getStepName = () => {
            if (currentStep === 1) return 'te-form';
            if (currentStep === 2) return 'ta-form';
            if (currentStep === 3) return 'nai-form';
          };

          const getCorrectAnswer = () => {
            const verb = getCurrentVerb();
            if (currentStep === 1) return verb.te;
            if (currentStep === 2) return verb.ta;
            if (currentStep === 3) return verb.nai;
          };

          const handleSubmit = () => {
            const correctAnswer = getCorrectAnswer();
            const trimmedInput = userInput.trim().toLowerCase();

            if (trimmedInput === correctAnswer) {
              setScore(score + 1);
              setTotalQuestions(totalQuestions + 1);
              setFeedback('');
              setUserInput('');

              if (currentStep === 3) {
                if (currentVerbIndex + 1 < shuffledVerbs.length) {
                  setCurrentVerbIndex(currentVerbIndex + 1);
                  setCurrentStep(1);
                } else {
                  setEndTime(Date.now());
                  setGameState('result');
                }
              } else {
                setCurrentStep(currentStep + 1);
              }
            } else {
              setTotalQuestions(totalQuestions + 1);
              setFeedback(`Incorrect. The correct answer is„Äå${correctAnswer}„Äç`);
            }
          };

          const handleNext = () => {
            setFeedback('');
            setUserInput('');

            if (currentStep === 3) {
              if (currentVerbIndex + 1 < shuffledVerbs.length) {
                setCurrentVerbIndex(currentVerbIndex + 1);
                setCurrentStep(1);
              } else {
                setEndTime(Date.now());
                setGameState('result');
              }
            } else {
              setCurrentStep(currentStep + 1);
            }
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter') {
              if (feedback) {
                handleNext();
              } else {
                handleSubmit();
              }
            }
          };

          const handleNameKeyPress = (e) => {
            if (e.key === 'Enter') {
              handleNameSubmit();
            }
          };

          const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
          };

          const getTotalTime = () => {
            if (endTime && startTime) {
              return Math.floor((endTime - startTime) / 1000);
            }
            return elapsedTime;
          };

          return (
            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-purple-100 to-pink-100 p-4">
              {gameState === 'name' && (
                <div className="text-center bg-white rounded-lg shadow-lg p-8 max-w-md w-full">
                  <h1 className="text-3xl font-bold mb-4 text-purple-600">Japanese Verb Conjugation Quiz</h1>
                  <p className="text-gray-700 mb-6">Enter your name to begin:</p>
                  <input
                    type="text"
                    value={playerName}
                    onChange={(e) => setPlayerName(e.target.value)}
                    onKeyPress={handleNameKeyPress}
                    placeholder="Your name"
                    className="w-full text-xl text-center border-2 border-purple-300 rounded-lg p-3 mb-4 focus:outline-none focus:border-purple-500"
                    autoFocus
                  />
                  <button
                    onClick={handleNameSubmit}
                    disabled={!playerName.trim()}
                    className={`w-full font-bold py-3 px-8 rounded-full text-xl shadow-lg ${
                      playerName.trim()
                        ? 'bg-purple-500 hover:bg-purple-600 text-white'
                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    }`}
                  >
                    Continue
                  </button>
                </div>
              )}

              {gameState === 'start' && (
                <div className="text-center bg-white rounded-lg shadow-lg p-8 max-w-md w-full">
                  <div className="mb-4">
                    <p className="text-lg text-gray-600">Player:</p>
                    <p className="text-2xl font-bold text-purple-600">{playerName}</p>
                  </div>
                  <h1 className="text-3xl font-bold mb-4 text-purple-600">Japanese Verb Conjugation Quiz</h1>
                  <div className="text-left mb-6 space-y-2 text-gray-700">
                    <p>üìù Look at the masu-form verb and conjugate it</p>
                    <p>‚ë† Enter the te-form in romaji</p>
                    <p>‚ë° Enter the ta-form in romaji</p>
                    <p>‚ë¢ Enter the nai-form in romaji</p>
                    <p className="mt-4 text-sm text-gray-500">Example: tabemasu ‚Üí tabete ‚Üí tabeta ‚Üí tabenai</p>
                  </div>

                  <div className="mb-6">
                    <p className="text-gray-700 font-semibold mb-3">Question Order:</p>
                    <div className="flex flex-col space-y-2">
                      <button
                        onClick={() => setOrderMode('sequential')}
                        className={`py-3 px-6 rounded-lg font-bold transition-all ${
                          orderMode === 'sequential'
                            ? 'bg-purple-500 text-white shadow-lg'
                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                        }`}
                      >
                        üìã Sequential Order
                      </button>
                      <button
                        onClick={() => setOrderMode('random')}
                        className={`py-3 px-6 rounded-lg font-bold transition-all ${
                          orderMode === 'random'
                            ? 'bg-purple-500 text-white shadow-lg'
                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                        }`}
                      >
                        üîÄ Random Order
                      </button>
                    </div>
                  </div>

                  <button
                    onClick={startGame}
                    className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg"
                  >
                    Start
                  </button>
                </div>
              )}

              {gameState === 'playing' && getCurrentVerb() && (
                <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full">
                  <div className="flex justify-between mb-6 text-sm">
                    <div className="text-gray-600">
                      Question {currentVerbIndex + 1}/{shuffledVerbs.length}
                    </div>
                    <div className="text-purple-600 font-bold">
                      Correct: {score}/{totalQuestions}
                    </div>
                  </div>

                  <div className="text-center mb-4">
                    <div className="text-2xl font-bold text-blue-600">
                      ‚è±Ô∏è {formatTime(elapsedTime)}
                    </div>
                  </div>

                  <div className="text-center mb-8">
                    <div className="text-5xl font-bold text-purple-600 mb-4">
                      {getCurrentVerb().masu}
                    </div>
                    <div className="text-2xl text-gray-700 mb-2">
                      ‚Üì
                    </div>
                    <div className="text-xl font-bold text-pink-600">
                      {getStepName()}
                    </div>
                  </div>

                  {!feedback ? (
                    <div>
                      <input
                        type="text"
                        value={userInput}
                        onChange={(e) => setUserInput(e.target.value)}
                        onKeyPress={handleKeyPress}
                        placeholder="Enter in romaji"
                        className="w-full text-2xl text-center border-2 border-purple-300 rounded-lg p-4 mb-4 focus:outline-none focus:border-purple-500"
                        autoFocus
                      />
                      <button
                        onClick={handleSubmit}
                        className="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-lg text-xl shadow-lg"
                      >
                        Submit
                      </button>
                    </div>
                  ) : (
                    <div>
                      <div className="bg-red-100 border-2 border-red-300 rounded-lg p-4 mb-4 text-center">
                        <p className="text-red-600 font-bold text-lg mb-2">‚ùå {feedback}</p>
                      </div>
                      <button
                        onClick={handleNext}
                        className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl shadow-lg"
                      >
                        Next
                      </button>
                    </div>
                  )}

                  <div className="mt-6 flex justify-center space-x-2">
                    <div className={`w-3 h-3 rounded-full ${currentStep >= 1 ? 'bg-purple-500' : 'bg-gray-300'}`}></div>
                    <div className={`w-3 h-3 rounded-full ${currentStep >= 2 ? 'bg-purple-500' : 'bg-gray-300'}`}></div>
                    <div className={`w-3 h-3 rounded-full ${currentStep >= 3 ? 'bg-purple-500' : 'bg-gray-300'}`}></div>
                  </div>
                </div>
              )}

              {gameState === 'result' && (
                <div className="text-center bg-white rounded-lg shadow-lg p-8 max-w-md w-full">
                  <h1 className="text-3xl font-bold mb-6 text-purple-600">Results</h1>
                  
                  <div className="mb-6 p-4 bg-purple-50 rounded-lg">
                    <p className="text-lg text-gray-600 mb-2">Player:</p>
                    <p className="text-3xl font-bold text-purple-600 mb-4">{playerName}</p>
                  </div>

                  <div className="space-y-4 mb-6">
                    <div className="p-4 bg-blue-50 rounded-lg">
                      <p className="text-gray-600 mb-1">‚è±Ô∏è Time</p>
                      <p className="text-3xl font-bold text-blue-600">{formatTime(getTotalTime())}</p>
                    </div>

                    <div className="p-4 bg-green-50 rounded-lg">
                      <p className="text-gray-600 mb-1">‚úÖ Correct Answers</p>
                      <p className="text-3xl font-bold text-green-600">{score}/{totalQuestions}</p>
                    </div>

                    <div className="p-4 bg-pink-50 rounded-lg">
                      <p className="text-gray-600 mb-1">üìä Accuracy</p>
                      <p className="text-3xl font-bold text-pink-600">
                        {totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0}%
                      </p>
                    </div>
                  </div>

                  <button
                    onClick={() => setGameState('start')}
                    className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg"
                  >
                    Try Again
                  </button>
                </div>
              )}
            </div>
          );
        }
        ReactDOM.render(<App />, document.getElementById('artifact_react'));
    </script>
</body>
</html>
